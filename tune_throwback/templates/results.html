{% extends 'base.html' %}

{% block header %}
<script>
$(function() {
  var availableTags = {{ all_songs | safe}};
  $( "#tags" ).autocomplete({
    source: availableTags
  });
});
</script>
{% endblock %}

{% block body %}
<div class="container span6">
  
  <h1 style="text-align: center;">Look at these ancient tunes!!!!!</h1>
  <h5 style="text-align: center;">Remember when {{ song.song }} was #{{song.rank}} on the charts? Here's what else was trending back then, way back on {{song.week}}!</h5>
  
  <div class = "span4" style="text-align: center;">
    <form method="POST" action="results" id="song_form" class="form-inline">
      <label for="tags">Or, try another song!</label>
      <input class="form-control" name="song_text" id="tags" placeholder="Enter a song" />
      {% csrf_token %}
      <button type="submit" class="btn btn-primary" form="song_form" value="Submit">Submit</button>
    </form>
  </div>

  <table class="table table-hover" style="background-color:white;">
    <thead>
      <tr>
        <th>Song</th>
        <th>Artist</th>
        <th>Listen</th>
      </tr>
    </thead>
    <tbody>
      {% for item in songs %}
      <tr>
        <td>
          <a href="/results/{{item.pk|safe}}/">
            {{ item.song | safe }}
          </a>
        </td>
        <td>
          {{item.artist | safe }}
        </td>   
        <td>
          <a type="button" class="btn btn-default" href="https://play.spotify.com/search/{{item.song}}%20{{item.artist}}" target="_blank">
            <span class="glyphicon glyphicon-headphones" aria-hidden="true"></span> Spotify
          </a>  
          <a type="button" class="btn btn-default" href="https://www.youtube.com/results?search_query={{item.song}}%20{{item.artist}}" target="_blank">
            <span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Youtube
          </a>  
        </td>               
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>
{% endblock %}